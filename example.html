<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252"><title>chalks.py</title><style>
a {color:#777; text-decoration:none;}
a.ten {color:#BBB; text-decoration:none;}
a:hover {color:#CBC}
body { 	background-color:#000; 
	color:#BAB; 
	background: linear-gradient(90deg, #030303 0%, #080808 50%, #030303 100%);
} 
</style></head><body><table><tbody><tr><td><pre><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%201%20&amp;body=#%21/usr/bin/python"> 1   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%202%20&amp;body=#"> 2   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%203%20&amp;body=#%20Copyright%202013%20Alexandr%20Kalenuk."> 3   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%204%20&amp;body=#"> 4   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%205%20&amp;body=#%20Licensed%20under%20the%20Apache%20License,%20Version%202.0%20%28the%20%22License%22%29;"> 5   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%206%20&amp;body=#%20you%20may%20not%20use%20this%20file%20except%20in%20compliance%20with%20the%20License."> 6   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%207%20&amp;body=#%20You%20may%20obtain%20a%20copy%20of%20the%20License%20at"> 7   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%208%20&amp;body=#"> 8   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%209%20&amp;body=#%20http://www.apache.org/licenses/LICENSE-2.0"> 9   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2010%20&amp;body=#" class="ten"> 10   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2011%20&amp;body=#%20Unless%20required%20by%20applicable%20law%20or%20agreed%20to%20in%20writing,%20software"> 11   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2012%20&amp;body=#%20distributed%20under%20the%20License%20is%20distributed%20on%20an%20%22AS%20IS%22%20BASIS,"> 12   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2013%20&amp;body=#%20WITHOUT%20WARRANTIES%20OR%20CONDITIONS%20OF%20ANY%20KIND,%20either%20express%20or%20implied."> 13   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2014%20&amp;body=#%20See%20the%20License%20for%20the%20specific%20language%20governing%20permissions%20and"> 14   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2015%20&amp;body=#%20limitations%20under%20the%20License."> 15   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2016%20&amp;body=#"> 16   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2017%20&amp;body=#%20mailto:%20akalenuk@gmail.com"> 17   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2018%20&amp;body="> 18   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2019%20&amp;body=import%20re"> 19   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2020%20&amp;body=import%20sys" class="ten"> 20   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2021%20&amp;body=import%20cgi"> 21   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2022%20&amp;body=import%20random"> 22   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2023%20&amp;body=import%20tempfile"> 23   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2024%20&amp;body=import%20webbrowser"> 24   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2025%20&amp;body="> 25   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2026%20&amp;body=separators%20=%20%22%20@%28%29%7B%7D[],.:;%5C%22%5C%27%60%3C%3E=+-*/%5Ct%5Cn%5C%5C?%7C&amp;#%22"> 26   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2027%20&amp;body=safe_separators%20=%20%7B%7D"> 27   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2028%20&amp;body="> 28   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2029%20&amp;body=for%20s%20in%20separators:"> 29   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2030%20&amp;body=safe_separators[s]%20=%20cgi.escape%28s,%20quote%20=%20True%29" class="ten"> 30   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2031%20&amp;body="> 31   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2032%20&amp;body=n%20=%200"> 32   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2033%20&amp;body=lines%20=%20[]"> 33   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2034%20&amp;body=chunks%20=%20set%28%29"> 34   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2035%20&amp;body=chunk_ns%20=%20%7B%7D"> 35   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2036%20&amp;body=if%20len%28sys.argv%29==1:"> 36   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2037%20&amp;body=print%20%22Select%20file.%22"> 37   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2038%20&amp;body=exit%281%29"> 38   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2039%20&amp;body="> 39   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2040%20&amp;body=name%20=%20sys.argv[1]" class="ten"> 40   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2041%20&amp;body=f%20=%20open%28name%29"> 41   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2042%20&amp;body=lines%20=%20f.readlines%28%29"> 42   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2043%20&amp;body=lines%20=%20[line.rstrip%28%29%20+%20%22%5Cn%22%20for%20line%20in%20lines]"> 43   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2044%20&amp;body=f.close%28%29"> 44   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2045%20&amp;body="> 45   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2046%20&amp;body="> 46   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2047%20&amp;body=word%20=%20%22%22"> 47   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2048%20&amp;body=for%20line%20in%20lines:"> 48   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2049%20&amp;body=for%20c%20in%20line:"> 49   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2050%20&amp;body=if%20c%20in%20separators:" class="ten"> 50   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2051%20&amp;body=if%20word%20%21=%20%22%22:"> 51   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2052%20&amp;body=chunks.add%28word%29"> 52   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2053%20&amp;body=if%20word%20in%20chunk_ns:"> 53   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2054%20&amp;body=chunk_ns[word]%20+=%201"> 54   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2055%20&amp;body=else:"> 55   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2056%20&amp;body=chunk_ns[word]%20=%201"> 56   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2057%20&amp;body=word%20=%20%22%22"> 57   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2058%20&amp;body=else:"> 58   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2059%20&amp;body=word%20+=%20c"> 59   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2060%20&amp;body=" class="ten"> 60   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2061%20&amp;body="> 61   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2062%20&amp;body=def%20color_of%28word%29:"> 62   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2063%20&amp;body=if%20ord%28word[0]%29%20%3E=%20128:"> 63   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2064%20&amp;body=return%20%22909090%22"> 64   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2065%20&amp;body=def%20to_ff%28x%29:"> 65   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2066%20&amp;body=y%20=%20hex%28%20int%28x%29%20%29[2:]"> 66   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2067%20&amp;body=if%20len%28y%29%20==%201:"> 67   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2068%20&amp;body=return%20%220%22+y"> 68   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2069%20&amp;body=else:"> 69   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2070%20&amp;body=return%20y" class="ten"> 70   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2071%20&amp;body=random.seed%28word%29"> 71   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2072%20&amp;body=word_n%20=%20random.random%28%29%20*%202147483648"> 72   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2073%20&amp;body=r%20=%20%28word_n%20%%20140%29%20+%20100;"> 73   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2074%20&amp;body=g%20=%20%28word_n%20/%20140%20%%20130%29%20+%20100;"> 74   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2075%20&amp;body=b%20=%20%28word_n%20/%20140%20/%20130%20%%20140%29%20+%20100;"> 75   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2076%20&amp;body=return%20to_ff%28r%29%20+%20to_ff%28g%29%20+%20to_ff%28b%29"> 76   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2077%20&amp;body="> 77   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2078%20&amp;body=chunks_col%20=%20%7B%7D"> 78   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2079%20&amp;body=for%20chunk%20in%20chunks:"> 79   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2080%20&amp;body=color%20=%20color_of%28chunk%29;" class="ten"> 80   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2081%20&amp;body=chunks_col[chunk]%20=%20color"> 81   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2082%20&amp;body="> 82   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2083%20&amp;body="> 83   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2084%20&amp;body=mail%20=%20%22%22"> 84   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2085%20&amp;body=for%20line%20in%20lines:"> 85   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2086%20&amp;body=mail_if_any%20=%20re.search%28r%22[%5Cw.]+@[%5Cw.]+%22,%20line%29"> 86   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2087%20&amp;body=if%20mail_if_any%20%21=%20None:"> 87   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2088%20&amp;body=mail%20=%20mail_if_any.group%280%29"> 88   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2089%20&amp;body=break"> 89   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2090%20&amp;body=" class="ten"> 90   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2091%20&amp;body="> 91   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2092%20&amp;body=style%20=%20%22%22%22"> 92   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2093%20&amp;body=a%20%7Bcolor:#777;%20text-decoration:none;%7D"> 93   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2094%20&amp;body=a.ten%20%7Bcolor:#BBB;%20text-decoration:none;%7D"> 94   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2095%20&amp;body=a:hover%20%7Bcolor:#CBC%7D"> 95   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2096%20&amp;body=body%20%7B%20background-color:#000;"> 96   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2097%20&amp;body=color:#BAB;"> 97   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2098%20&amp;body=background:%20linear-gradient%2890deg,%20#030303%200%,%20#080808%2050%,%20#030303%20100%%29;"> 98   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%2099%20&amp;body=%7D"> 99   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20100%20&amp;body=%22%22%22" class="ten"> 100   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20101%20&amp;body="> 101   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20102%20&amp;body=def%20mailto%28mail,%20subj,%20text%29:"> 102   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20103%20&amp;body=return%20%22%5C%22mailto:%22%20+%20mail%20+%20%22?subject=%22%20+%20subj%20+%20%22%20&amp;body=%22%20+%20cgi.escape%28text,%20quote%20=%20True%29%20+%20%22%5C%22%22"> 103   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20104%20&amp;body="> 104   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20105%20&amp;body="> 105   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20106%20&amp;body=new_text%20=%20%22%3Chtml%3E%3Chead%3E%3Ctitle%3E%22%20+%20name%20+%20%22%3C/title%3E%3Cstyle%3E%22%20+%20style%20+%20%22%3C/style%3E%3C/head%3E%3Cbody%3E%22"> 106   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20107%20&amp;body=new_text%20+=%20%22%3Ctable%3E%3Ctr%3E%22"> 107   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20108%20&amp;body="> 108   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20109%20&amp;body=#%20numbers"> 109   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20110%20&amp;body=new_text%20+=%20%22%3Ctd%3E%3Cpre%3E%22" class="ten"> 110   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20111%20&amp;body=for%20line,%20n%20in%20zip%28lines,%20range%281,%20len%28lines%29+1%29%29:"> 111   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20112%20&amp;body=if%20n%20%%2010%20==%200:"> 112   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20113%20&amp;body=cls%20=%20%22%20class=%5C%22ten%5C%22%22"> 113   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20114%20&amp;body=else:"> 114   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20115%20&amp;body=cls%20=%20%22%22"> 115   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20116%20&amp;body=new_text%20+=%20%22%3Ca%20href=%22%20+%20mailto%28mail,%20name%20+%20%22:%20%22%20+%20str%28n%29,%20line%29%20+%20cls%20+%20%22%3E%22"> 116   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20117%20&amp;body=new_text%20+=%20%22%20%22%20+%20str%28n%29%20+%203*%22%20%22"> 117   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20118%20&amp;body=new_text%20+=%20%22%3C/a%3E%3Cbr%3E%22"> 118   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20119%20&amp;body=new_text%20+=%20%22%3C/pre%3E%3C/td%3E%22"> 119   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20120%20&amp;body=" class="ten"> 120   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20121%20&amp;body=#%20code"> 121   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20122%20&amp;body=word%20=%20%22%22"> 122   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20123%20&amp;body=new_text%20+=%20%22%3Ctd%3E%3Cpre%3E%22"> 123   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20124%20&amp;body=for%20line,%20n%20in%20zip%28lines,%20range%281,%20len%28lines%29+1%29%29:"> 124   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20125%20&amp;body=for%20c%20in%20line:"> 125   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20126%20&amp;body=if%20c%20in%20separators:"> 126   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20127%20&amp;body=if%20word%20%21=%20%22%22:"> 127   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20128%20&amp;body=i%20=%20%22%22"> 128   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20129%20&amp;body=uni%20=%20%22%22"> 129   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20130%20&amp;body=if%20chunk_ns[word]%20==%201:" class="ten"> 130   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20131%20&amp;body=i%20=%20%22%3Ci%3E%22"> 131   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20132%20&amp;body=uni%20=%20%22%3C/i%3E%22"> 132   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20133%20&amp;body=new_text%20+=%20%22%3Cfont%20color=%5C%22#%22%20+%20chunks_col[word]%20+%20%22%5C%22%3E%22%20+%20i%20+%20word%20+%20uni%20+%20%22%3C/font%3E%22"> 133   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20134%20&amp;body=word%20=%20%22%22"> 134   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20135%20&amp;body=new_text%20+=%20safe_separators[c]"> 135   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20136%20&amp;body=else:"> 136   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20137%20&amp;body=word%20+=%20c"> 137   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20138%20&amp;body=n%20+=%201"> 138   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20139%20&amp;body=new_text%20+=%20%22%3C/pre%3E%3C/td%3E%22"> 139   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20140%20&amp;body=" class="ten"> 140   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20141%20&amp;body=new_text%20+=%20%22%3C/tr%3E%3C/table%3E%22"> 141   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20142%20&amp;body=new_text%20+=%20%22%3C/body%3E%3C/html%3E%22"> 142   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20143%20&amp;body="> 143   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20144%20&amp;body="> 144   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20145%20&amp;body=#%20temp%20file%20left%20undeleted"> 145   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20146%20&amp;body=f%20=%20tempfile.NamedTemporaryFile%28delete=False,%20suffix=%22.html%22%29"> 146   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20147%20&amp;body=f.write%28new_text%29"> 147   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20148%20&amp;body=f.close%28%29"> 148   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20149%20&amp;body="> 149   </a><br><a href="mailto:akalenuk@gmail.com?subject=chalks.py:%20150%20&amp;body=webbrowser.open%28url=f.name%29" class="ten"> 150   </a><br></pre></td><td><pre>#<font color="#8fd885">!</font>/<font color="#8b9694"><i>usr</i></font>/<font color="#c264d0"><i>bin</i></font>/<font color="#84aba4"><i>python</i></font>
#
# <font color="#84ae7a"><i>Copyright</i></font> <font color="#eaa86b"><i>2013</i></font> <font color="#c4e19e"><i>Alexandr</i></font> <font color="#77acc2"><i>Kalenuk</i></font>.
#
# <font color="#de819a"><i>Licensed</i></font> <font color="#7a8a67">under</font> <font color="#c0aabe">the</font> <font color="#b989e3"><i>Apache</i></font> <font color="#b6b488">License</font>, <font color="#bdb4cc"><i>Version</i></font> <font color="#87a4e7">2</font>.<font color="#cca0b7">0</font> (<font color="#c0aabe">the</font> "<font color="#b6b488">License</font>");
# <font color="#826870"><i>you</i></font> <font color="#b2ce94">may</font> <font color="#b59c7c"><i>not</i></font> <font color="#97e5bd"><i>use</i></font> <font color="#a5dcb6"><i>this</i></font> <font color="#bf9969">file</font> <font color="#ab69d1"><i>except</i></font> <font color="#eddc66">in</font> <font color="#ab986a"><i>compliance</i></font> <font color="#b9668c"><i>with</i></font> <font color="#c0aabe">the</font> <font color="#b6b488">License</font>.
# <font color="#b5d969"><i>You</i></font> <font color="#b2ce94">may</font> <font color="#c1e38f"><i>obtain</i></font> <font color="#acaa6f">a</font> <font color="#b08a8b"><i>copy</i></font> <font color="#82ad82"><i>of</i></font> <font color="#c0aabe">the</font> <font color="#b6b488">License</font> <font color="#a4c8b0"><i>at</i></font>
#
# <font color="#85cbe5"><i>http</i></font>://<font color="#abb99e"><i>www</i></font>.<font color="#a76edc"><i>apache</i></font>.<font color="#c2647e"><i>org</i></font>/<font color="#dcba91"><i>licenses</i></font>/<font color="#9f839e"><i>LICENSE</i></font>-<font color="#87a4e7">2</font>.<font color="#cca0b7">0</font>
#
# <font color="#6ea3af"><i>Unless</i></font> <font color="#83dc6a"><i>required</i></font> <font color="#81d46d"><i>by</i></font> <font color="#98e0da"><i>applicable</i></font> <font color="#9e6caa"><i>law</i></font> <font color="#9392dc">or</font> <font color="#e170cd"><i>agreed</i></font> <font color="#9076de"><i>to</i></font> <font color="#eddc66">in</font> <font color="#779b86"><i>writing</i></font>, <font color="#eea4a1"><i>software</i></font>
# <font color="#d2b0b7">distributed</font> <font color="#7a8a67">under</font> <font color="#c0aabe">the</font> <font color="#b6b488">License</font> <font color="#658e9a"><i>is</i></font> <font color="#d2b0b7">distributed</font> <font color="#c16bda"><i>on</i></font> <font color="#e481a3"><i>an</i></font> "<font color="#e17365"><i>AS</i></font> <font color="#d687b3"><i>IS</i></font>" <font color="#a3a1b5"><i>BASIS</i></font>,
# <font color="#ccbad2"><i>WITHOUT</i></font> <font color="#b7de9f"><i>WARRANTIES</i></font> <font color="#706cbb"><i>OR</i></font> <font color="#91bc9e"><i>CONDITIONS</i></font> <font color="#e0d9a0"><i>OF</i></font> <font color="#ada66a"><i>ANY</i></font> <font color="#e1d990"><i>KIND</i></font>, <font color="#6ab887"><i>either</i></font> <font color="#db989e"><i>express</i></font> <font color="#9392dc">or</font> <font color="#859bbc"><i>implied</i></font>.
# <font color="#b4979c"><i>See</i></font> <font color="#c0aabe">the</font> <font color="#b6b488">License</font> <font color="#7987aa">for</font> <font color="#c0aabe">the</font> <font color="#c6de90"><i>specific</i></font> <font color="#e46e79"><i>language</i></font> <font color="#b9b9db"><i>governing</i></font> <font color="#6ecb7f"><i>permissions</i></font> <font color="#dc95d6"><i>and</i></font>
# <font color="#6d9a72"><i>limitations</i></font> <font color="#7a8a67">under</font> <font color="#c0aabe">the</font> <font color="#b6b488">License</font>.
#
# <font color="#82a994">mailto</font>: <font color="#647466"><i>akalenuk</i></font>@<font color="#c9b98c"><i>gmail</i></font>.<font color="#d66b7b"><i>com</i></font>

<font color="#8cacac">import</font> <font color="#bb82de">re</font>
<font color="#8cacac">import</font> <font color="#836ee0">sys</font>
<font color="#8cacac">import</font> <font color="#a4e0ba">cgi</font>
<font color="#8cacac">import</font> <font color="#8fd295">random</font>
<font color="#8cacac">import</font> <font color="#e99faa">tempfile</font>
<font color="#8cacac">import</font> <font color="#78b39f">webbrowser</font>

<font color="#92997a">separators</font> = " @(){}[],.:;\"\'`&lt;&gt;=+-*/\<font color="#c1a87b"><i>t</i></font>\<font color="#a988e5">n</font>\\?|&amp;#"
<font color="#a3719c">safe_separators</font> = {}

<font color="#7987aa">for</font> <font color="#af7080">s</font> <font color="#eddc66">in</font> <font color="#92997a">separators</font>:
	<font color="#a3719c">safe_separators</font>[<font color="#af7080">s</font>] = <font color="#a4e0ba">cgi</font>.<font color="#7abe6d">escape</font>(<font color="#af7080">s</font>, <font color="#8e756e">quote</font> = <font color="#b2e077">True</font>)

<font color="#a988e5">n</font> = <font color="#cca0b7">0</font>
<font color="#ed8eba">lines</font> = []
<font color="#b39567">chunks</font> = <font color="#b0cda8"><i>set</i></font>()
<font color="#76b36d">chunk_ns</font> = {}
<font color="#b0a5e6">if</font> <font color="#7493e3">len</font>(<font color="#836ee0">sys</font>.<font color="#e7e0ce">argv</font>)==<font color="#6e72dd">1</font>:
	<font color="#668ea4"><i>print</i></font> "<font color="#eeb57a"><i>Select</i></font> <font color="#bf9969">file</font>."
	<font color="#afdf9c"><i>exit</i></font>(<font color="#6e72dd">1</font>)

<font color="#89e1d4">name</font> = <font color="#836ee0">sys</font>.<font color="#e7e0ce">argv</font>[<font color="#6e72dd">1</font>]
<font color="#95bedb">f</font> = <font color="#ce73a2">open</font>(<font color="#89e1d4">name</font>)
<font color="#ed8eba">lines</font> = <font color="#95bedb">f</font>.<font color="#b786e4"><i>readlines</i></font>()
<font color="#ed8eba">lines</font> = [<font color="#dcbde0">line</font>.<font color="#9eaf9d"><i>rstrip</i></font>() + "\<font color="#a988e5">n</font>" <font color="#7987aa">for</font> <font color="#dcbde0">line</font> <font color="#eddc66">in</font> <font color="#ed8eba">lines</font>]
<font color="#95bedb">f</font>.<font color="#ea707d">close</font>()


<font color="#6a7bbc">word</font> = ""
<font color="#7987aa">for</font> <font color="#dcbde0">line</font> <font color="#eddc66">in</font> <font color="#ed8eba">lines</font>:
	<font color="#7987aa">for</font> <font color="#badbd9">c</font> <font color="#eddc66">in</font> <font color="#dcbde0">line</font>:
		<font color="#b0a5e6">if</font> <font color="#badbd9">c</font> <font color="#eddc66">in</font> <font color="#92997a">separators</font>:
			<font color="#b0a5e6">if</font> <font color="#6a7bbc">word</font> <font color="#8fd885">!</font>= "":
				<font color="#b39567">chunks</font>.<font color="#b49964"><i>add</i></font>(<font color="#6a7bbc">word</font>)
				<font color="#b0a5e6">if</font> <font color="#6a7bbc">word</font> <font color="#eddc66">in</font> <font color="#76b36d">chunk_ns</font>:
					<font color="#76b36d">chunk_ns</font>[<font color="#6a7bbc">word</font>] += <font color="#6e72dd">1</font>
				<font color="#c2ac88">else</font>:
					<font color="#76b36d">chunk_ns</font>[<font color="#6a7bbc">word</font>] = <font color="#6e72dd">1</font>
			<font color="#6a7bbc">word</font> = ""
		<font color="#c2ac88">else</font>:
			<font color="#6a7bbc">word</font> += <font color="#badbd9">c</font>


<font color="#a47d91">def</font> <font color="#64aec4">color_of</font>(<font color="#6a7bbc">word</font>):
	<font color="#b0a5e6">if</font> <font color="#a864ad"><i>ord</i></font>(<font color="#6a7bbc">word</font>[<font color="#cca0b7">0</font>]) &gt;= <font color="#a3b8ed"><i>128</i></font>:
		<font color="#e9c967">return</font> "<font color="#8679e0"><i>909090</i></font>"
	<font color="#a47d91">def</font> <font color="#969fb0">to_ff</font>(<font color="#b5c686">x</font>):
		<font color="#9a6f6f">y</font> = <font color="#75e3a2"><i>hex</i></font>( <font color="#ecbfba"><i>int</i></font>(<font color="#b5c686">x</font>) )[<font color="#87a4e7">2</font>:]
		<font color="#b0a5e6">if</font> <font color="#7493e3">len</font>(<font color="#9a6f6f">y</font>) == <font color="#6e72dd">1</font>:
			<font color="#e9c967">return</font> "<font color="#cca0b7">0</font>"+<font color="#9a6f6f">y</font>
		<font color="#c2ac88">else</font>:
			<font color="#e9c967">return</font> <font color="#9a6f6f">y</font>
	<font color="#8fd295">random</font>.<font color="#c088d2"><i>seed</i></font>(<font color="#6a7bbc">word</font>)
	<font color="#9c979b">word_n</font> = <font color="#8fd295">random</font>.<font color="#8fd295">random</font>() * <font color="#d9b9b4"><i>2147483648</i></font>
	<font color="#7497bb">r</font> = (<font color="#9c979b">word_n</font> <font color="#947fcf">%</font> <font color="#e4c6de">140</font>) + <font color="#ebb185">100</font>;
	<font color="#c78693">g</font> = (<font color="#9c979b">word_n</font> / <font color="#e4c6de">140</font> <font color="#947fcf">%</font> <font color="#8e687e">130</font>) + <font color="#ebb185">100</font>;
	<font color="#6b65be">b</font> = (<font color="#9c979b">word_n</font> / <font color="#e4c6de">140</font> / <font color="#8e687e">130</font> <font color="#947fcf">%</font> <font color="#e4c6de">140</font>) + <font color="#ebb185">100</font>;
	<font color="#e9c967">return</font> <font color="#969fb0">to_ff</font>(<font color="#7497bb">r</font>) + <font color="#969fb0">to_ff</font>(<font color="#c78693">g</font>) + <font color="#969fb0">to_ff</font>(<font color="#6b65be">b</font>)

<font color="#c0699d">chunks_col</font> = {}
<font color="#7987aa">for</font> <font color="#dccbe4">chunk</font> <font color="#eddc66">in</font> <font color="#b39567">chunks</font>:
	<font color="#83c666">color</font> = <font color="#64aec4">color_of</font>(<font color="#dccbe4">chunk</font>);
	<font color="#c0699d">chunks_col</font>[<font color="#dccbe4">chunk</font>] = <font color="#83c666">color</font>


<font color="#d2a466">mail</font> = ""
<font color="#7987aa">for</font> <font color="#dcbde0">line</font> <font color="#eddc66">in</font> <font color="#ed8eba">lines</font>:
	<font color="#698a6f">mail_if_any</font> = <font color="#bb82de">re</font>.<font color="#cb726d"><i>search</i></font>(<font color="#7497bb">r</font>"[\<font color="#8dc0c0">w</font>.]+@[\<font color="#8dc0c0">w</font>.]+", <font color="#dcbde0">line</font>)
	<font color="#b0a5e6">if</font> <font color="#698a6f">mail_if_any</font> <font color="#8fd885">!</font>= <font color="#d277e2"><i>None</i></font>:
		<font color="#d2a466">mail</font> = <font color="#698a6f">mail_if_any</font>.<font color="#9fada9"><i>group</i></font>(<font color="#cca0b7">0</font>)
		<font color="#adad7b"><i>break</i></font>


<font color="#d7b2d1">style</font> = """
<font color="#acaa6f">a</font> {<font color="#83c666">color</font>:#<font color="#72a295"><i>777</i></font>; <font color="#d6987a">text</font>-<font color="#7da78b">decoration</font>:<font color="#a5718a">none</font>;}
<font color="#acaa6f">a</font>.<font color="#de88dd">ten</font> {<font color="#83c666">color</font>:#<font color="#bcccbc"><i>BBB</i></font>; <font color="#d6987a">text</font>-<font color="#7da78b">decoration</font>:<font color="#a5718a">none</font>;}
<font color="#acaa6f">a</font>:<font color="#6dc08f"><i>hover</i></font> {<font color="#83c666">color</font>:#<font color="#9071a7"><i>CBC</i></font>}
<font color="#68c477">body</font> { 	<font color="#ab7b7c">background</font>-<font color="#83c666">color</font>:#<font color="#d382b9"><i>000</i></font>;
	<font color="#83c666">color</font>:#<font color="#afcb83"><i>BAB</i></font>;
	<font color="#ab7b7c">background</font>: <font color="#ce8a74"><i>linear</i></font>-<font color="#bd6cee"><i>gradient</i></font>(<font color="#66e4b4"><i>90deg</i></font>, #<font color="#c9d5ce">030303</font> <font color="#ef6edb"><i>0%</i></font>, #<font color="#81e4a4"><i>080808</i></font> <font color="#a1b898"><i>50%</i></font>, #<font color="#c9d5ce">030303</font> <font color="#b18fbe"><i>100%</i></font>);
}
"""

<font color="#a47d91">def</font> <font color="#82a994">mailto</font>(<font color="#d2a466">mail</font>, <font color="#de6b91">subj</font>, <font color="#d6987a">text</font>):
	<font color="#e9c967">return</font> "\"<font color="#82a994">mailto</font>:" + <font color="#d2a466">mail</font> + "?<font color="#7c8caa"><i>subject</i></font>=" + <font color="#de6b91">subj</font> + " &amp;<font color="#68c477">body</font>=" + <font color="#a4e0ba">cgi</font>.<font color="#7abe6d">escape</font>(<font color="#d6987a">text</font>, <font color="#8e756e">quote</font> = <font color="#b2e077">True</font>) + "\""


<font color="#cc6bc4">new_text</font> = "&lt;<font color="#aec1e5">html</font>&gt;&lt;<font color="#9e83e4">head</font>&gt;&lt;<font color="#7ab2d6">title</font>&gt;" + <font color="#89e1d4">name</font> + "&lt;/<font color="#7ab2d6">title</font>&gt;&lt;<font color="#d7b2d1">style</font>&gt;" + <font color="#d7b2d1">style</font> + "&lt;/<font color="#d7b2d1">style</font>&gt;&lt;/<font color="#9e83e4">head</font>&gt;&lt;<font color="#68c477">body</font>&gt;"
<font color="#cc6bc4">new_text</font> += "&lt;<font color="#cbcb8c">table</font>&gt;&lt;<font color="#73df81">tr</font>&gt;"

# <font color="#73a48b"><i>numbers</i></font>
<font color="#cc6bc4">new_text</font> += "&lt;<font color="#7894ab">td</font>&gt;&lt;<font color="#8b948e">pre</font>&gt;"
<font color="#7987aa">for</font> <font color="#dcbde0">line</font>, <font color="#a988e5">n</font> <font color="#eddc66">in</font> <font color="#d7b4ce">zip</font>(<font color="#ed8eba">lines</font>, <font color="#909072">range</font>(<font color="#6e72dd">1</font>, <font color="#7493e3">len</font>(<font color="#ed8eba">lines</font>)+<font color="#6e72dd">1</font>)):
	<font color="#b0a5e6">if</font> <font color="#a988e5">n</font> <font color="#947fcf">%</font> <font color="#6c8071"><i>10</i></font> == <font color="#cca0b7">0</font>:
		<font color="#80a78d">cls</font> = " <font color="#caa4bb"><i>class</i></font>=\"<font color="#de88dd">ten</font>\""
	<font color="#c2ac88">else</font>:
		<font color="#80a78d">cls</font> = ""
	<font color="#cc6bc4">new_text</font> += "&lt;<font color="#acaa6f">a</font> <font color="#688898"><i>href</i></font>=" + <font color="#82a994">mailto</font>(<font color="#d2a466">mail</font>, <font color="#89e1d4">name</font> + ": " + <font color="#d56f93">str</font>(<font color="#a988e5">n</font>), <font color="#dcbde0">line</font>) + <font color="#80a78d">cls</font> + "&gt;"
	<font color="#cc6bc4">new_text</font> += " " + <font color="#d56f93">str</font>(<font color="#a988e5">n</font>) + <font color="#8383c1"><i>3</i></font>*" "
	<font color="#cc6bc4">new_text</font> += "&lt;/<font color="#acaa6f">a</font>&gt;&lt;<font color="#d065bf"><i>br</i></font>&gt;"
<font color="#cc6bc4">new_text</font> += "&lt;/<font color="#8b948e">pre</font>&gt;&lt;/<font color="#7894ab">td</font>&gt;"

# <font color="#737eb2"><i>code</i></font>
<font color="#6a7bbc">word</font> = ""
<font color="#cc6bc4">new_text</font> += "&lt;<font color="#7894ab">td</font>&gt;&lt;<font color="#8b948e">pre</font>&gt;"
<font color="#7987aa">for</font> <font color="#dcbde0">line</font>, <font color="#a988e5">n</font> <font color="#eddc66">in</font> <font color="#d7b4ce">zip</font>(<font color="#ed8eba">lines</font>, <font color="#909072">range</font>(<font color="#6e72dd">1</font>, <font color="#7493e3">len</font>(<font color="#ed8eba">lines</font>)+<font color="#6e72dd">1</font>)):
	<font color="#7987aa">for</font> <font color="#badbd9">c</font> <font color="#eddc66">in</font> <font color="#dcbde0">line</font>:
		<font color="#b0a5e6">if</font> <font color="#badbd9">c</font> <font color="#eddc66">in</font> <font color="#92997a">separators</font>:
			<font color="#b0a5e6">if</font> <font color="#6a7bbc">word</font> <font color="#8fd885">!</font>= "":
				<font color="#e9b989">i</font> = ""
				<font color="#998393">uni</font> = ""
				<font color="#b0a5e6">if</font> <font color="#76b36d">chunk_ns</font>[<font color="#6a7bbc">word</font>] == <font color="#6e72dd">1</font>:
					<font color="#e9b989">i</font> = "&lt;<font color="#e9b989">i</font>&gt;"
					<font color="#998393">uni</font> = "&lt;/<font color="#e9b989">i</font>&gt;"
				<font color="#cc6bc4">new_text</font> += "&lt;<font color="#8fd0b7">font</font> <font color="#83c666">color</font>=\"#" + <font color="#c0699d">chunks_col</font>[<font color="#6a7bbc">word</font>] + "\"&gt;" + <font color="#e9b989">i</font> + <font color="#6a7bbc">word</font> + <font color="#998393">uni</font> + "&lt;/<font color="#8fd0b7">font</font>&gt;"
				<font color="#6a7bbc">word</font> = ""
			<font color="#cc6bc4">new_text</font> += <font color="#a3719c">safe_separators</font>[<font color="#badbd9">c</font>]
		<font color="#c2ac88">else</font>:
			<font color="#6a7bbc">word</font> += <font color="#badbd9">c</font>
	<font color="#a988e5">n</font> += <font color="#6e72dd">1</font>
<font color="#cc6bc4">new_text</font> += "&lt;/<font color="#8b948e">pre</font>&gt;&lt;/<font color="#7894ab">td</font>&gt;"

<font color="#cc6bc4">new_text</font> += "&lt;/<font color="#73df81">tr</font>&gt;&lt;/<font color="#cbcb8c">table</font>&gt;"
<font color="#cc6bc4">new_text</font> += "&lt;/<font color="#68c477">body</font>&gt;&lt;/<font color="#aec1e5">html</font>&gt;"


# <font color="#dd837e"><i>temp</i></font> <font color="#bf9969">file</font> <font color="#a1ac6d"><i>left</i></font> <font color="#e0a1a5"><i>undeleted</i></font>
<font color="#95bedb">f</font> = <font color="#e99faa">tempfile</font>.<font color="#d27491"><i>NamedTemporaryFile</i></font>(<font color="#e07685"><i>delete</i></font>=<font color="#7e65ba"><i>False</i></font>, <font color="#b78caa"><i>suffix</i></font>=".<font color="#aec1e5">html</font>")
<font color="#95bedb">f</font>.<font color="#77db80"><i>write</i></font>(<font color="#cc6bc4">new_text</font>)
<font color="#95bedb">f</font>.<font color="#ea707d">close</font>()

<font color="#78b39f">webbrowser</font>.<font color="#ce73a2">open</font>(<font color="#6c69ab"><i>url</i></font>=<font color="#95bedb">f</font>.<font color="#89e1d4">name</font>)
</pre></td></tr></tbody></table></body></html>